(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,a){},31:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),s=a.n(c),i=(a(29),a(3)),o=a(4),u=a(6),l=a(5),d=a(14),j=a(7),h=a(2),b=a.n(h),p=a(9),O=a(11),m=function(){var e=Object(p.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=m,v=a(17),x="user",g=function(e){return localStorage.setItem(x,JSON.stringify(e))},k=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},y=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(x));null===t&&(t={}),k(t)(e)}))},S=function(e){return new Promise((function(t){g(Object(v.a)(Object(v.a)({},{name:"",email:"",image:"",description:""}),e)),k("OK")(t)}))},I=(a(31),a(0)),N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsx)("div",{className:"carregandoPai",children:Object(I.jsx)("div",{className:"carregando",children:Object(I.jsx)("h1",{children:"Carregando..."})})})}}]),a}(r.a.Component),w=N,C=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",carregando:!0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,this.setState({username:t.name},(function(){a.setState({carregando:!1})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,a=e.carregando;return Object(I.jsx)("header",{"data-testid":"header-component",children:a?Object(I.jsx)(w,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h1",{children:"Header"}),Object(I.jsx)("h3",{"data-testid":"header-user-name",children:t}),Object(I.jsx)(d.b,{"data-testid":"link-to-search",to:"/search",children:"Search"}),Object(I.jsx)(d.b,{"data-testid":"link-to-favorites",to:"/favorites",children:"Favorites"}),Object(I.jsx)(d.b,{"data-testid":"link-to-profile",to:"/profile",children:"Profile"})]})})}}]),a}(r.a.Component),F=C,P=a(24),U="favorite_songs";JSON.parse(localStorage.getItem(U))||localStorage.setItem(U,JSON.stringify([]));var M=function(){return JSON.parse(localStorage.getItem(U))},q=function(e){return localStorage.setItem(U,JSON.stringify(e))},B=function(e){return function(t){setTimeout((function(){t(e)}),500)}},A=function(e){return new Promise((function(t){if(e){var a=M();q([].concat(Object(P.a)(a),[e]))}B("OK")(t)}))},J=function(e){return new Promise((function(t){var a=M();q(a.filter((function(t){return t.trackId!==e.trackId}))),B("OK")(t)}))},D=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={carregando:!1,isFavourite:!1},n.favouriteSong=n.favouriteSong.bind(Object(O.a)(n)),n.verifyIfIsFavourite=n.verifyIfIsFavourite.bind(Object(O.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.verifyIfIsFavourite()}},{key:"verifyIfIsFavourite",value:function(){var e=this,t=this.props.trackId;this.state.carregando||this.setState({carregando:!0},Object(p.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise((function(e){var t=M();B(t)(e)}));case 2:n=a.sent,r=n.some((function(e){return e.trackId===t})),e.setState({carregando:!1,isFavourite:r});case 5:case"end":return a.stop()}}),a)}))))}},{key:"favouriteSong",value:function(){var e=this,t=this.props,a=t.name,n=t.previewUrl,r=t.type,c=t.trackId,s=this.state,i=s.carregando,o=s.isFavourite;i||this.setState({carregando:!0},Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=6;break}return t.next=3,J({name:a,previewUrl:n,type:r,trackId:c});case 3:e.setState({carregando:!1,isFavourite:!1}),t.next=9;break;case 6:return t.next=8,A({name:a,previewUrl:n,type:r,trackId:c});case 8:e.setState({carregando:!1,isFavourite:!0});case 9:case"end":return t.stop()}}),t)}))))}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.previewUrl,n=e.type,r=e.trackId,c=this.state,s=c.carregando,i=c.isFavourite;return Object(I.jsx)("div",{className:"musicCard",children:"song"===n?Object(I.jsx)("div",{className:"musicContent",children:s?Object(I.jsx)(w,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:"nome",children:t}),Object(I.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(I.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(I.jsx)("code",{children:"audio"}),"."]}),Object(I.jsx)("input",{"data-testid":"checkbox-music-".concat(r),type:"checkbox",onChange:this.favouriteSong,checked:i})]})}):null})}}]),a}(r.a.Component);D.defaultProps={name:"Music",previewUrl:"MusicLink",type:"another",trackId:"0"};var E=D,L=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={musics:[],carregando:!0},n.requestMusics=n.requestMusics.bind(Object(O.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.requestMusics()}},{key:"requestMusics",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match,e.next=3,f(t.params.id);case 3:a=e.sent,this.setState({musics:a},(function(){n.setState({carregando:!1})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.musics,a=e.carregando;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)("div",{className:"Album","data-testid":"page-album",children:a?Object(I.jsx)(w,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h1",{children:"Album"}),Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[Object(I.jsx)("img",{src:t[0].artworkUrl100,alt:t[0].artistName}),Object(I.jsx)("h2",{"data-testid":"artist-name",children:t[0].artistName}),Object(I.jsx)("h3",{"data-testid":"album-name",children:t[0].collectionName}),t.map((function(e,t){return Object(I.jsx)(E,{name:e.trackName,previewUrl:e.previewUrl,type:e.kind,trackId:e.trackId},t)}))]})})]})})]})}}]),a}(r.a.Component),K=L,T=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)("div",{className:"Favorites","data-testid":"page-favorites",children:Object(I.jsx)("h1",{children:"Favorites"})})]})}}]),a}(r.a.Component),R=T,H=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={carregando:!1,minNumber:3,username:"",buttonState:!0},e.activateButton=e.activateButton.bind(Object(O.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(e)),e}return Object(o.a)(a,[{key:"handleSubmit",value:function(){var e=this;this.setState({carregando:!0},Object(p.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.username,n=e.props.history,t.next=4,S({name:a});case 4:n.push("/search");case 5:case"end":return t.stop()}}),t)}))))}},{key:"activateButton",value:function(e){var t=e.target,a=this.state.minNumber,n=(t.value?t.value.length:0)<a;this.setState({buttonState:n,username:t.value})}},{key:"render",value:function(){var e=this.state,t=e.buttonState,a=e.username,n=e.carregando;return Object(I.jsx)("div",{className:"login","data-testid":"page-login",children:n?Object(I.jsx)(w,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h1",{children:"Login"}),Object(I.jsxs)("form",{children:[Object(I.jsx)("input",{onChange:this.activateButton,"data-testid":"login-name-input",type:"text",value:a,placeholder:"username"}),Object(I.jsx)("button",{"data-testid":"login-submit-button",type:"button",disabled:t,onClick:this.handleSubmit,children:"Login"})]})]})})}}]),a}(r.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsx)("div",{className:"NotFound","data-testid":"page-not-found",children:Object(I.jsx)("h1",{children:"NotFound"})})}}]),a}(r.a.Component),_=V,z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)("div",{className:"Profile","data-testid":"page-profile",children:Object(I.jsx)("h1",{children:"Profile"})})]})}}]),a}(r.a.Component),G=z,Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)("div",{className:"ProfileEdit","data-testid":"page-profile-edit",children:Object(I.jsx)("h1",{children:"ProfileEdit"})})]})}}]),a}(r.a.Component),W=Q,X=function(){var e=Object(p.a)(b.a.mark((function e(t){var a,n,r,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=X,Z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={search:"",actualSearch:"",response:[],carregando:!1,pesquisado:!1,buttonActivate:!0},n.handleInputChange=n.handleInputChange.bind(Object(O.a)(n)),n.handleButtonClick=n.handleButtonClick.bind(Object(O.a)(n)),n}return Object(o.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value?t.value:"",n=a.length<2;this.setState({buttonActivate:n,search:a})}},{key:"handleButtonClick",value:function(){var e=this;this.setState({carregando:!0,pesquisado:!1},(function(){var t=e.state.search;e.setState({actualSearch:t},Object(p.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.actualSearch,e.setState({search:""}),t.next=4,Y(a);case 4:n=t.sent,e.setState({response:n},(function(){e.setState({carregando:!1,pesquisado:!0})}));case 6:case"end":return t.stop()}}),t)}))))}))}},{key:"render",value:function(){var e=this.state,t=e.search,a=e.buttonActivate,n=e.carregando,r=e.response,c=e.actualSearch,s=e.pesquisado;return Object(I.jsxs)("div",{className:"Search","data-testid":"page-search",children:[Object(I.jsx)(F,{}),n?Object(I.jsx)(w,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h1",{children:"Search"}),Object(I.jsxs)("form",{children:[Object(I.jsx)("input",{"data-testid":"search-artist-input",type:"text",placeholder:"Search",value:t,onChange:this.handleInputChange}),Object(I.jsx)("button",{"data-testid":"search-artist-button",type:"button",disabled:a,onClick:this.handleButtonClick,children:"Pesquisar"})]})]}),s&&Object(I.jsx)("div",{className:"search-results",children:r.length>0?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("h2",{children:["Resultado de \xe1lbuns de:"," ",c]}),Object(I.jsx)("div",{children:r.map((function(e){return Object(I.jsxs)("div",{className:"album",id:"".concat(e.artistId,"|").concat(e.collectionId),children:[Object(I.jsxs)("div",{className:"album-info",children:[Object(I.jsxs)("p",{children:["Artista:"," ",e.artistName]}),Object(I.jsxs)("p",{children:["Cole\xe7\xe3o:"," ",e.collectionName]}),Object(I.jsxs)("p",{children:["Data de Lan\xe7amento:"," ",e.releaseDate]})]}),Object(I.jsxs)("p",{children:["Valor:"," ",e.collectionPrice]}),Object(I.jsx)(d.b,{"data-testid":"link-to-album-".concat(e.collectionId),to:"/album/".concat(e.collectionId),children:"Escutar"})]},e.collectionId)}))})]}):Object(I.jsx)("h2",{children:"Nenhum \xe1lbum foi encontrado"})})]})}}]),a}(r.a.Component),$=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(I.jsx)(d.a,{children:Object(I.jsxs)(j.c,{children:[Object(I.jsx)(j.a,{exact:!0,path:"/search",component:Z}),Object(I.jsx)(j.a,{exact:!0,path:"/album/:id",component:K}),Object(I.jsx)(j.a,{exact:!0,path:"/favorites",component:R}),Object(I.jsx)(j.a,{exact:!0,path:"/profile/edit",component:W}),Object(I.jsx)(j.a,{exact:!0,path:"/profile",component:G}),Object(I.jsx)(j.a,{exact:!0,path:"/",component:H}),Object(I.jsx)(j.a,{component:_})]})})}}]),a}(r.a.Component),ee=$;s.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(ee,{logado:"false"})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.3500de7d.chunk.js.map